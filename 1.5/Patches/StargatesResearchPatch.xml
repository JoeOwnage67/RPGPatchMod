<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>CCYT.StargatesMod</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>

			<!-- Stargate Creation Research -->
			<!-- makeshift -->
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/techLevel</xpath>
					<value>		
						<techLevel>Medieval</techLevel>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/prerequisites</xpath>
					<value>		
						<prerequisites>
							<li>StargateMod_GlyphDeciphering</li>
						</prerequisites>
					</value>
				</li>
				<li MayRequire="DankPyon.Medieval.Overhaul" Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/requiredResearchBuilding</xpath>
					<value>		
						<requiredResearchBuilding>DankPyon_AdvancedResearchBench</requiredResearchBuilding>
					</value>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/requiredResearchFacilities</xpath>					
				</li>

			<!-- advanced -->	
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_AdvancedStargateMakingResearch"]/techLevel</xpath>
					<value>		
						<techLevel>Medieval</techLevel>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/prerequisites</xpath>
					<value>		
						<prerequisites>
							<li>SStargateMod_StargateMakingResearch</li>
						</prerequisites>
					</value>
				</li>
				<li MayRequire="DankPyon.Medieval.Overhaul" Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/requiredResearchBuilding</xpath>
					<value>		
						<requiredResearchBuilding>DankPyon_AdvancedResearchBench</requiredResearchBuilding>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/baseCost</xpath>
					<value>		
						<baseCost>7000</baseCost>
					</value>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/requiredResearchFacilities</xpath>					
				</li>

				<!-- iris alloy research -->
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisAlloyResearch"]/techLevel</xpath>
					<value>		
						<techLevel>Medieval</techLevel>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisAlloyResearch"]/prerequisites</xpath>
					<value>		
						<prerequisites>
							<li>StargateMod_GlyphDeciphering</li>
						</prerequisites>
					</value>
				</li>
				<li MayRequire="DankPyon.Medieval.Overhaul" Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisAlloyResearch"]/requiredResearchBuilding</xpath>
					<value>		
						<requiredResearchBuilding>DankPyon_AdvancedResearchBench</requiredResearchBuilding>
					</value>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisAlloyResearch"]/requiredResearchFacilities</xpath>					
				</li>

				<!-- iris barrier research -->
				<li Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisResearch"]/techLevel</xpath>
					<value>		
						<techLevel>Medieval</techLevel>
					</value>
				</li>			
				<li MayRequire="DankPyon.Medieval.Overhaul" Class="PatchOperationReplace">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateIrisResearch"]/requiredResearchBuilding</xpath>
					<value>		
						<requiredResearchBuilding>DankPyon_AdvancedResearchBench</requiredResearchBuilding>
					</value>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>Defs/ResearchProjectDef[defName="StargateMod_StargateMakingResearch"]/requiredResearchFacilities</xpath>					
				</li>
			</operations>
		</match>
	</Operation>
</Patch>
